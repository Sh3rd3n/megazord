---
phase: 15-npm-publication
plan: 03
type: execute
wave: 3
depends_on: [15-01, 15-02]
files_modified: [CHANGELOG.md]
autonomous: false
requirements: [NPM-01]

must_haves:
  truths:
    - "megazord-cli is published on npmjs.com"
    - "npm view megazord-cli returns package metadata"
    - "Trusted Publishing is configured on npmjs.com for release.yml"
  artifacts:
    - path: "CHANGELOG.md"
      provides: "v1.1.0 release notes with publication details"
      contains: "1.1.0"
  key_links:
    - from: "npmjs.com/package/megazord-cli"
      to: ".github/workflows/release.yml"
      via: "Trusted Publishing OIDC connection"
      pattern: "release.yml"
---

<objective>
Publish megazord-cli v1.1.0 to npm and configure Trusted Publishing for automated future releases.

Purpose: NPM-01 requires the package to be live on npmjs.com. The first publish must be manual (npm's Trusted Publishing requires the package to exist first). After publishing, Trusted Publishing is configured so future tag pushes auto-publish via the release.yml workflow from Phase 14.
Output: Live npm package, configured Trusted Publishing, updated CHANGELOG.md
</objective>

<execution_context>
@/Users/sh3rd3n/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sh3rd3n/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-npm-publication/15-RESEARCH.md
@.planning/phases/14-ci-cd-pipeline/14-02-SUMMARY.md
@.planning/phases/15-npm-publication/15-01-SUMMARY.md
@.planning/phases/15-npm-publication/15-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Finalize CHANGELOG.md for v1.1.0 release</name>
  <files>CHANGELOG.md</files>
  <action>
Update CHANGELOG.md to convert the v1.1.0 placeholder into a real release entry.

The v1.1.0 section should document what was added in Phases 12-15:
- **Added**: npm publication as `megazord-cli`, silent CLI installer (`bunx megazord-cli install`), update and uninstall commands, `~/.claude/megazord/` dedicated installation directory, GitHub Actions CI (lint, typecheck, test), automated release workflow with OIDC provenance, README with quickstart and command reference
- **Changed**: Package renamed from `megazord` to `megazord-cli`, version deduplication (single source in package.json), files installed to `~/.claude/megazord/` instead of plugin cache
- **Fixed**: Missing `scripts/` in package files array, missing `agents/` in install copy list

Add the release date (today's date) to the v1.1.0 header. Keep the existing v1.0.0 entry unchanged.

Follow the Keep a Changelog 1.1.0 format already established in the file.
  </action>
  <verify>
Run: `head -40 CHANGELOG.md` — should show v1.1.0 with today's date and categorized changes.
  </verify>
  <done>CHANGELOG.md has a complete v1.1.0 entry with release date and categorized changes</done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 2: First manual npm publish and Trusted Publishing setup</name>
  <files>package.json</files>
  <action>
**HUMAN ACTION REQUIRED** — Claude cannot perform npm login (requires 2FA browser flow).

Package megazord-cli v1.1.0 is ready for publication. All code changes are complete:
- package.json has publishConfig, dual bin entries, version 1.1.0
- Install/update/uninstall commands use ~/.claude/megazord/ with silent mode
- CHANGELOG.md documents the v1.1.0 release
- Release workflow (from Phase 14) is ready for subsequent automated publishes

**Steps to execute:**

1. Build and verify package contents:
   ```bash
   cd ~/Programming/Megazord
   bun run build
   npm pack --dry-run
   ```
   Verify the package includes: bin/, scripts/, skills/, agents/, hooks/, commands/, .claude-plugin/, CHANGELOG.md.

2. Login to npm (requires 2FA):
   ```bash
   npm login
   ```

3. Publish to npm:
   ```bash
   npm publish --access public
   ```
   This is the first publish — MUST be manual because Trusted Publishing requires the package to exist on npm first.

4. Verify on registry:
   ```bash
   npm view megazord-cli
   ```
   Should show the package with version 1.1.0.

5. Test bunx install:
   ```bash
   bunx megazord-cli install
   ```
   Should install to ~/.claude/megazord/ with single-line output.

6. Configure Trusted Publishing on npmjs.com:
   - Go to: https://www.npmjs.com/package/megazord-cli/access
   - Find: "Publishing access" > "Trusted Publisher"
   - Click: "GitHub Actions" > "Set up connection"
   - Fill: Owner=`Sh3rd3n` (capital S, case-sensitive), Repo=`megazord`, Workflow=`release.yml`, Env=(empty)
   - Click: "Set up connection"

7. (Optional) Security hardening: Enable "Require two-factor authentication and disallow tokens" for OIDC-only publishing.

**Note on owner casing:** If OIDC fails later, try `sh3rd3n` (lowercase) instead of `Sh3rd3n`.

Resume signal: Type "published" once complete, or describe any issues.
  </action>
  <verify>
Run: `npm view megazord-cli` — should return package metadata with version 1.1.0.
Run: `bunx megazord-cli version` — should print 1.1.0.
  </verify>
  <done>megazord-cli v1.1.0 is live on npmjs.com, Trusted Publishing configured for release.yml</done>
</task>

</tasks>

<verification>
1. `npm view megazord-cli` returns package metadata with version 1.1.0
2. `bunx megazord-cli install` works on a machine with Claude Code
3. CHANGELOG.md has complete v1.1.0 entry with release date
4. Trusted Publishing configured on npmjs.com for release.yml workflow
</verification>

<success_criteria>
- `npm view megazord-cli` returns package metadata from npm registry
- `bunx megazord-cli` on a clean machine installs successfully and the CLI responds
- After `bunx megazord-cli install`, all plugin files are in `~/.claude/megazord/`
- Trusted Publishing is configured for future automated releases
</success_criteria>

<output>
After completion, create `.planning/phases/15-npm-publication/15-03-SUMMARY.md`
</output>
